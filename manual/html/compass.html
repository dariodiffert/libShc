<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>libShc: Visual Compass</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libShc
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Spherical Harmonics Computation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Visual Compass </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Visual Compass:</b></p>
<p>The visual compass is a simple method to determine the rotational offset between two different views. The most simple case is to detect a Z-axis only rotation as sketched in the following figure</p>
<div class="image">
<img src="compass.png" alt="compass.png"/>
</div>
<p>A <em>current view</em> and a <em>snap shot</em> are recorded at the same position but with a rotational misaligned. Now we simulate several rotation <em>hypotheses</em> by transforming the current view. For each of these rotation hypotheses we can calculate the <em>image difference</em> to the snapshot. The rotation hypotheses which minimizes the image difference estimates the rotational misalignment between both views.</p>
<p>In libShc a 3D visual compass is implemented via <a class="el" href="classshc_1_1_shc.html#a27f85f06317fcf4d7a473e71e9f3a066" title="Computes the rotational offset between two panoramic images (visual 3D compass) ">shc::Shc::compass</a> to determine arbitrary rotations between two views. Depending on the initialized rotations (see <a class="el" href="rotations.html">Rotations</a>), the search space and resolution can be adjusted. The norm used to calculate the difference can be set via <a class="el" href="classshc_1_1_shc.html#a73fb13dcfa55d0c353404c4445b309c9" title="Sets the norm used for feature comparisons. ">shc::Shc::set_feature_norm</a> and a normalization via <a class="el" href="classshc_1_1_shc.html#ae3160947ad39b2099b60030bb5ceebb2" title="Enables / disables normalization for feature comparisons. ">shc::Shc::set_feature_normalize</a>. If the <a class="el" href="tangentdistance.html">Tangent Distance</a> is enabled, the general robustness against transformations (e.g. rotations or translations) can be increaed. Note that the compass can only use the single-sided tangent distance. </p><hr/>
<p><b>Masked Visual Compass:</b></p>
<p>In some applications it might be useful to mask particular regions of an image, e.g. corrupted image data or the part occluded by the camera. The following figure shows an example for a strongly corrupted image:</p>
<div class="image">
<img src="compass_masked.png" alt="compass_masked.png"/>
</div>
<p>We can now use <a class="el" href="classshc_1_1_shc.html#a27f85f06317fcf4d7a473e71e9f3a066" title="Computes the rotational offset between two panoramic images (visual 3D compass) ">shc::Shc::compass</a> to align both images. In this example, both images are already aligned and we want to see the effect of the corrupted area on the visual compass.</p>
<p><b>Without using masks:</b></p>
<div class="image">
<img src="compass_masked_1.png" alt="compass_masked_1.png"/>
</div>
<p>As it can be seen, the corrupted regions are mapped on each other. However, the image itself is not aligned: The two different buildings are mixed and the horizon does not match well.</p>
<p><b>With using masks:</b></p>
<div class="image">
<img src="compass_masked_2.png" alt="compass_masked_2.png"/>
</div>
<p>By using masks we can exclude the corrupted areas such that both images are correctly aligned.</p>
<p>Since the calculation using masks includes two calculations of <a class="el" href="products.html">Products</a> for each compass step, <em>the calculation times may increase strongly!</em> The calculation times can be reduced as follows:</p>
<ul>
<li>Use masks which can be approximated by as few bands as possible (e.g. a hemispherical mask). Set the parameter <em>l_max</em> of the instance of <a class="el" href="classshc_1_1_shpm.html" title="Stores a Fourier coefficient vector and additional information. ">shc::Shpm</a> containing mask information as small as possible.</li>
<li>Since the result of a <a class="el" href="products.html">Products</a> has maximal band <img class="formulaInl" alt="$ L_f+L_G $" src="form_20.png"/>, where <img class="formulaInl" alt="$ L_f $" src="form_21.png"/> and <img class="formulaInl" alt="$ L_g $" src="form_22.png"/> are the maximal bands of the single functions, it may exceed the maximal band set for the mask. This can be prohibited by setting the maximal band for Clebsch-Gordan coefficients via <a class="el" href="classshc_1_1_shc.html#a65c2f7e0eb4667c4fc0d4ed86ae27382" title="Initializes the number of bands (frequencies) used for computations. ">shc::Shc::init_bands</a>.</li>
<li>Speed improvements from <a class="el" href="hemisphericalcontinuations.html">Hemispherical Continuations</a> also apply to the masked compass. Note that it is commonly not senseful for masks. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
